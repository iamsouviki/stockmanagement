(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5812],{5845:(e,t,s)=>{"use strict";s.d(t,{i:()=>l});var a=s(12115),r=s(39033);function l({prop:e,defaultProp:t,onChange:s=()=>{}}){let[l,n]=function({defaultProp:e,onChange:t}){let s=a.useState(e),[l]=s,n=a.useRef(l),c=(0,r.c)(t);return a.useEffect(()=>{n.current!==l&&(c(l),n.current=l)},[l,n,c]),s}({defaultProp:t,onChange:s}),c=void 0!==e,i=c?e:l,d=(0,r.c)(s);return[i,a.useCallback(t=>{if(c){let s="function"==typeof t?t(e):t;s!==e&&d(s)}else n(t)},[c,e,n,d])]}},6654:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return r}});let a=s(12115);function r(e,t){let s=(0,a.useRef)(null),r=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=s.current;e&&(s.current=null,e());let t=r.current;t&&(r.current=null,t())}else e&&(s.current=l(e,a)),t&&(r.current=l(t,a))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},49557:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(95155),r=s(12115),l=s(30285),n=s(66766),c=s(85127),i=s(62523),d=s(75074);let o=(0,s(40157).A)("CircleUserRound",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var m=s(75943),u=s(77223),x=s(90010),h=s(66424),f=s(66695);let p=e=>{let{customers:t,onEdit:s,onDelete:r,searchTerm:p,onSearchTermChange:j}=e;return(0,a.jsxs)(f.Zp,{className:"shadow-lg",children:[(0,a.jsxs)(f.aR,{children:[(0,a.jsx)(f.ZB,{className:"text-lg sm:text-xl text-primary",children:"Customer List"}),(0,a.jsx)(f.BT,{className:"text-sm sm:text-base",children:"Manage and view your customer base."}),(0,a.jsxs)("div",{className:"relative mt-2",children:[(0,a.jsx)(d.A,{className:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-muted-foreground"}),(0,a.jsx)(i.p,{type:"text",placeholder:"Search by mobile or name...",value:p,onChange:e=>j(e.target.value),className:"pl-8 sm:pl-10 w-full sm:w-72 text-xs sm:text-sm","aria-label":"Search customers by mobile number or name"})]})]}),(0,a.jsx)(f.Wu,{children:(0,a.jsxs)(h.F,{className:"w-full whitespace-nowrap rounded-md border",children:[(0,a.jsxs)(c.XI,{className:"min-w-[700px] sm:min-w-full",children:[(0,a.jsx)(c.A0,{children:(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nd,{className:"w-[50px] sm:w-[60px] px-2 sm:px-4",children:"Avatar"}),(0,a.jsx)(c.nd,{className:"px-2 sm:px-4",children:"Name"}),(0,a.jsx)(c.nd,{className:"px-2 sm:px-4",children:"Mobile Number"}),(0,a.jsx)(c.nd,{className:"px-2 sm:px-4",children:"Email"}),(0,a.jsx)(c.nd,{className:"px-2 sm:px-4 max-w-[150px] sm:max-w-[200px]",children:"Address"}),(0,a.jsx)(c.nd,{className:"text-center w-[100px] sm:w-[120px] px-2 sm:px-4",children:"Actions"})]})}),(0,a.jsx)(c.BF,{children:0===t.length?(0,a.jsx)(c.Hj,{children:(0,a.jsx)(c.nA,{colSpan:6,className:"h-24 text-center text-sm sm:text-base",children:p?"No customers match your search.":"No customers found. Add new customers to see them here."})}):t.map(e=>(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nA,{className:"px-2 sm:px-4",children:e.imageUrl?(0,a.jsx)(n.default,{src:e.imageUrl,alt:e.name,width:32,height:32,className:"rounded-full object-cover sm:w-10 sm:h-10","data-ai-hint":e.imageHint||"person avatar"}):(0,a.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-secondary rounded-full flex items-center justify-center",children:(0,a.jsx)(o,{className:"h-5 w-5 sm:h-6 sm:w-6 text-muted-foreground"})})}),(0,a.jsx)(c.nA,{className:"font-medium text-xs sm:text-sm px-2 sm:px-4 whitespace-normal break-words",children:e.name}),(0,a.jsx)(c.nA,{className:"text-xs sm:text-sm px-2 sm:px-4",children:e.mobileNumber}),(0,a.jsx)(c.nA,{className:"text-xs sm:text-sm px-2 sm:px-4 whitespace-normal break-words",children:e.email||"-"}),(0,a.jsx)(c.nA,{className:"text-xs sm:text-sm px-2 sm:px-4 max-w-[150px] sm:max-w-[200px] truncate whitespace-normal break-words",title:e.address||void 0,children:e.address||"-"}),(0,a.jsx)(c.nA,{className:"text-center px-2 sm:px-4",children:(0,a.jsxs)("div",{className:"flex justify-center space-x-1 sm:space-x-2",children:[(0,a.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-7 w-7 sm:h-8 sm:w-8",onClick:()=>s(e),title:"Edit Customer",children:(0,a.jsx)(m.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-blue-600"})}),(0,a.jsxs)(x.Lt,{children:[(0,a.jsx)(x.tv,{asChild:!0,children:(0,a.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-7 w-7 sm:h-8 sm:w-8",title:"Delete Customer",children:(0,a.jsx)(u.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-600"})})}),(0,a.jsxs)(x.EO,{children:[(0,a.jsxs)(x.wd,{children:[(0,a.jsx)(x.r7,{children:"Are you sure?"}),(0,a.jsxs)(x.$v,{children:['This action cannot be undone. This will permanently delete the customer "',e.name,'".']})]}),(0,a.jsxs)(x.ck,{children:[(0,a.jsx)(x.Zr,{children:"Cancel"}),(0,a.jsx)(x.Rx,{onClick:()=>r(e.id),className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})]})})]},e.id))})]}),(0,a.jsx)(h.$,{orientation:"horizontal"})]})})]})};var j=s(86442),w=s(50286),y=s(34301),N=s(87481),b=s(80410),v=s(68856),g=s(51470);let A=["owner","admin","employee"];function C(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!1),[c,i]=(0,r.useState)(null),[d,o]=(0,r.useState)(""),[m,u]=(0,r.useState)(!0),{toast:x}=(0,N.dj)();(0,r.useEffect)(()=>{(async()=>{u(!0);try{let e=await (0,b.od)();t(e.sort((e,t)=>e.name.localeCompare(t.name)))}catch(e){console.error("Error fetching customers:",e),x({title:"Error",description:"Failed to fetch customers.",variant:"destructive"})}u(!1)})()},[x]);let h=async s=>{try{await (0,b.w0)(s),t(e.filter(e=>e.id!==s)),x({title:"Customer Deleted",description:"The customer has been successfully removed.",variant:"destructive"})}catch(e){console.error("Error deleting customer:",e),x({title:"Error",description:"Failed to delete customer.",variant:"destructive"})}},f=async e=>{try{if((await (0,b.bD)(e.mobileNumber)).some(e=>!c||e.id!==c.id))return void x({title:"Mobile Number Exists",description:"This mobile number is already associated with another customer.",variant:"destructive"});if(c){await (0,b.Gk)(c.id,e);let s=await (0,b.od)();t(s.sort((e,t)=>e.name.localeCompare(t.name))),x({title:"Customer Updated",description:'Information for "'.concat(e.name,'" has been successfully updated.')})}else{let s={...e,imageUrl:"https://picsum.photos/seed/".concat(encodeURIComponent(e.name.split(" ")[0]),"/200/200"),imageHint:"person avatar"};await (0,b.yw)(s);let a=await (0,b.od)();t(a.sort((e,t)=>e.name.localeCompare(t.name))),x({title:"Customer Added",description:'"'.concat(e.name,'" has been successfully added.')})}n(!1),i(null)}catch(e){console.error("Error saving customer:",e),x({title:"Error",description:"Failed to save customer.",variant:"destructive"})}},C=(0,r.useMemo)(()=>{if(!d)return e;let t=d.toLowerCase();return e.filter(e=>e.mobileNumber.toLowerCase().includes(t)||e.name.toLowerCase().includes(t))},[e,d]),k=(0,r.useMemo)(()=>e.map(e=>e.mobileNumber),[e]);return(0,a.jsx)(g.default,{allowedRoles:A,children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold tracking-tight text-primary flex items-center",children:[(0,a.jsx)(w.A,{className:"mr-3 h-8 w-8"})," Customer Management"]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your customer database here."})]}),(0,a.jsxs)(l.$,{onClick:()=>{i(null),n(!0)},className:"bg-primary hover:bg-primary/90 w-full sm:w-auto",children:[(0,a.jsx)(y.A,{className:"mr-2 h-5 w-5"})," Add New Customer"]})]}),m?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(v.E,{className:"h-10 w-full sm:w-72 mb-4"}),(0,a.jsx)(v.E,{className:"h-12 w-full"}),(0,a.jsx)(v.E,{className:"h-20 w-full"}),(0,a.jsx)(v.E,{className:"h-20 w-full"})]}):(0,a.jsx)(p,{customers:C,onEdit:e=>{i(e),n(!0)},onDelete:h,searchTerm:d,onSearchTermChange:o}),(0,a.jsx)(j.A,{isOpen:s,onOpenChange:n,customer:c,onSubmit:f,existingMobileNumbers:k})]})})}},50286:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},61285:(e,t,s)=>{"use strict";s.d(t,{B:()=>i});var a,r=s(12115),l=s(52712),n=(a||(a=s.t(r,2)))["useId".toString()]||(()=>void 0),c=0;function i(e){let[t,s]=r.useState(n());return(0,l.N)(()=>{e||s(e=>e??String(c++))},[e]),e||(t?`radix-${t}`:"")}},75074:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},88720:(e,t,s)=>{Promise.resolve().then(s.bind(s,49557))},90010:(e,t,s)=>{"use strict";s.d(t,{$v:()=>p,EO:()=>u,Lt:()=>i,Rx:()=>j,Zr:()=>w,ck:()=>h,r7:()=>f,tv:()=>d,wd:()=>x});var a=s(95155),r=s(12115),l=s(61378),n=s(59434),c=s(30285);let i=l.bL,d=l.l9,o=l.ZL,m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});m.displayName=l.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsx)(l.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});u.displayName=l.UC.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};x.displayName="AlertDialogHeader";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="AlertDialogFooter";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold",s),...r})});f.displayName=l.hE.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});p.displayName=l.VY.displayName;let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.rc,{ref:t,className:(0,n.cn)((0,c.r)(),s),...r})});j.displayName=l.rc.displayName;let w=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.ZD,{ref:t,className:(0,n.cn)((0,c.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});w.displayName=l.ZD.displayName},92293:(e,t,s)=>{"use strict";s.d(t,{Oh:()=>l});var a=s(12115),r=0;function l(){a.useEffect(()=>{var e,t;let s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!=(e=s[0])?e:n()),document.body.insertAdjacentElement("beforeend",null!=(t=s[1])?t:n()),r++,()=>{1===r&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),r--}},[])}function n(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,9855,9701,3013,5209,5589,7655,221,2882,6766,6916,8970,8469,5419,8441,1684,7358],()=>t(88720)),_N_E=e.O()}]);