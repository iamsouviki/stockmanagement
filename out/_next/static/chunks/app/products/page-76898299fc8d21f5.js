(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3571],{965:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},9572:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},24371:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},26126:(e,t,s)=>{"use strict";s.d(t,{E:()=>i});var a=s(95155);s(12115);var r=s(74466),l=s(59434);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(n({variant:s}),t),...r})}},37607:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]])},42923:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>J});var a=s(95155),r=s(12115),l=s(30285),n=s(66766),i=s(85127),d=s(26126),c=s(87374);let o=(0,s(40157).A)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var m=s(75943),u=s(77223),x=s(90010),h=s(66424);let p=e=>{let{products:t,onEdit:s,onDelete:r}=e;return(0,a.jsxs)(h.F,{className:"w-full whitespace-nowrap rounded-md border-b",children:[" ",(0,a.jsxs)(i.XI,{className:"min-w-[800px] sm:min-w-full",children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nd,{className:"w-[50px] sm:w-[80px] px-2 sm:px-4",children:"Image"}),(0,a.jsx)(i.nd,{className:"px-2 sm:px-4",children:"Name"}),(0,a.jsx)(i.nd,{className:"px-2 sm:px-4",children:"Category"}),(0,a.jsx)(i.nd,{className:"px-2 sm:px-4",children:"Serial No."}),(0,a.jsx)(i.nd,{className:"px-2 sm:px-4",children:"Barcode"}),(0,a.jsx)(i.nd,{className:"text-right px-2 sm:px-4",children:"Price"}),(0,a.jsx)(i.nd,{className:"text-right px-2 sm:px-4",children:"Quantity"}),(0,a.jsx)(i.nd,{className:"text-center w-[100px] sm:w-[120px] px-2 sm:px-4",children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:0===t.length?(0,a.jsx)(i.Hj,{children:(0,a.jsx)(i.nA,{colSpan:8,className:"h-24 text-center text-sm sm:text-base",children:"No products found for the current page or filters."})}):t.map(e=>(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nA,{className:"px-2 sm:px-4",children:e.imageUrl?(0,a.jsx)(n.default,{src:e.imageUrl,alt:e.name,width:32,height:32,className:"rounded-md object-cover sm:w-10 sm:h-10","data-ai-hint":e.imageHint||"product item"}):(0,a.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-secondary rounded-md flex items-center justify-center text-muted-foreground",children:(0,a.jsx)(c.A,{className:"h-5 w-5 sm:h-6 sm:w-6"})})}),(0,a.jsx)(i.nA,{className:"font-medium text-xs sm:text-sm px-2 sm:px-4 whitespace-normal break-words max-w-[120px] sm:max-w-xs",children:e.name}),(0,a.jsx)(i.nA,{className:"text-xs sm:text-sm px-2 sm:px-4",children:(0,a.jsxs)(d.E,{variant:"secondary",className:"flex items-center gap-1 w-fit text-xs",children:[(0,a.jsx)(o,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"whitespace-normal break-words max-w-[100px] sm:max-w-[150px] truncate",children:e.categoryName||"Unknown"})]})}),(0,a.jsx)(i.nA,{className:"text-xs sm:text-sm px-2 sm:px-4 whitespace-normal break-words",children:e.serialNumber}),(0,a.jsx)(i.nA,{className:"text-xs sm:text-sm px-2 sm:px-4 whitespace-normal break-words",children:e.barcode}),(0,a.jsxs)(i.nA,{className:"text-right text-xs sm:text-sm px-2 sm:px-4",children:["₹",e.price.toFixed(2)]}),(0,a.jsx)(i.nA,{className:"text-right text-xs sm:text-sm px-2 sm:px-4",children:e.quantity}),(0,a.jsx)(i.nA,{className:"text-center px-2 sm:px-4",children:(0,a.jsxs)("div",{className:"flex justify-center space-x-1 sm:space-x-2",children:[(0,a.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-7 w-7 sm:h-8 sm:w-8",onClick:()=>s(e),title:"Edit Product",children:(0,a.jsx)(m.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-blue-600"})}),(0,a.jsxs)(x.Lt,{children:[(0,a.jsx)(x.tv,{asChild:!0,children:(0,a.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-7 w-7 sm:h-8 sm:w-8",title:"Delete Product",children:(0,a.jsx)(u.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-600"})})}),(0,a.jsxs)(x.EO,{children:[(0,a.jsxs)(x.wd,{children:[(0,a.jsx)(x.r7,{children:"Are you sure?"}),(0,a.jsxs)(x.$v,{children:['This action cannot be undone. This will permanently delete the product "',e.name,'".']})]}),(0,a.jsxs)(x.ck,{children:[(0,a.jsx)(x.Zr,{children:"Cancel"}),(0,a.jsx)(x.Rx,{onClick:()=>r(e.id),className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})]})})]},e.id))})]}),(0,a.jsx)(h.$,{orientation:"horizontal"})]})};var f=s(54165),g=s(62177),j=s(90221),y=s(55594),v=s(17759),w=s(62523),N=s(59409);let b=y.Ik({name:y.Yj().min(2,"Name must be at least 2 characters.").max(100,"Name must be 100 characters or less."),serialNumber:y.Yj().min(3,"Serial number must be at least 3 characters.").max(50,"Serial number must be 50 characters or less."),barcode:y.Yj().min(3,"Barcode must be at least 3 characters.").max(50,"Barcode must be 50 characters or less."),price:y.au.number().min(.01,"Price must be greater than 0."),quantity:y.au.number().int().min(0,"Quantity cannot be negative."),categoryId:y.Yj().min(1,"Category is required.")}),C=e=>{let{product:t,onSubmit:s,onCancel:r,categories:n}=e,i=(0,g.mN)({resolver:(0,j.u)(b),defaultValues:t?{name:t.name,serialNumber:t.serialNumber,barcode:t.barcode,price:t.price,quantity:t.quantity,categoryId:t.categoryId}:{name:"",serialNumber:"",barcode:"",price:0,quantity:0,categoryId:""}});return(0,a.jsx)(v.lV,{...i,children:(0,a.jsxs)("form",{onSubmit:i.handleSubmit(s),className:"space-y-4 sm:space-y-6",children:[(0,a.jsx)(v.zB,{control:i.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(v.eI,{children:[(0,a.jsx)(v.lR,{children:"Product Name"}),(0,a.jsx)(v.MJ,{children:(0,a.jsx)(w.p,{placeholder:"e.g., iPhone 15 Pro",...t})}),(0,a.jsx)(v.C5,{})]})}}),(0,a.jsx)(v.zB,{control:i.control,name:"serialNumber",render:e=>{let{field:t}=e;return(0,a.jsxs)(v.eI,{children:[(0,a.jsx)(v.lR,{children:"Serial Number (SN)"}),(0,a.jsx)(v.MJ,{children:(0,a.jsx)(w.p,{placeholder:"Enter unique serial number",...t})}),(0,a.jsx)(v.C5,{})]})}}),(0,a.jsx)(v.zB,{control:i.control,name:"barcode",render:e=>{let{field:t}=e;return(0,a.jsxs)(v.eI,{children:[(0,a.jsx)(v.lR,{children:"Barcode"}),(0,a.jsx)(v.MJ,{children:(0,a.jsx)(w.p,{placeholder:"Enter or scan barcode",...t})}),(0,a.jsx)(v.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[(0,a.jsx)(v.zB,{control:i.control,name:"price",render:e=>{let{field:t}=e;return(0,a.jsxs)(v.eI,{children:[(0,a.jsx)(v.lR,{children:"Price (₹)"}),(0,a.jsx)(v.MJ,{children:(0,a.jsx)(w.p,{type:"number",step:"0.01",placeholder:"0.00",...t})}),(0,a.jsx)(v.C5,{})]})}}),(0,a.jsx)(v.zB,{control:i.control,name:"quantity",render:e=>{let{field:t}=e;return(0,a.jsxs)(v.eI,{children:[(0,a.jsx)(v.lR,{children:"Quantity"}),(0,a.jsx)(v.MJ,{children:(0,a.jsx)(w.p,{type:"number",placeholder:"0",...t})}),(0,a.jsx)(v.C5,{})]})}})]}),(0,a.jsx)(v.zB,{control:i.control,name:"categoryId",render:e=>{let{field:t}=e;return(0,a.jsxs)(v.eI,{children:[(0,a.jsx)(v.lR,{children:"Category"}),(0,a.jsxs)(N.l6,{onValueChange:t.onChange,defaultValue:t.value,disabled:0===n.length,children:[(0,a.jsx)(v.MJ,{children:(0,a.jsx)(N.bq,{children:(0,a.jsx)(N.yv,{placeholder:n.length>0?"Select a category":"No categories available"})})}),(0,a.jsx)(N.gC,{children:n.map(e=>(0,a.jsx)(N.eb,{value:e.id,children:e.name},e.id))})]}),(0,a.jsx)(v.C5,{})]})}}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:space-x-3 pt-2 sm:pt-4",children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",onClick:r,className:"w-full sm:w-auto",children:"Cancel"}),(0,a.jsx)(l.$,{type:"submit",className:"w-full sm:w-auto bg-primary hover:bg-primary/90",children:t?"Update Product":"Add Product"})]})]})})},A=e=>{let{isOpen:t,onOpenChange:s,product:r,onSubmit:l,categories:n}=e;return(0,a.jsx)(f.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(f.Cf,{className:"w-full max-w-md sm:max-w-lg md:max-w-[480px]",children:[(0,a.jsxs)(f.c7,{children:[(0,a.jsx)(f.L3,{className:"text-xl sm:text-2xl font-semibold text-primary",children:r?"Edit Product":"Add New Product"}),(0,a.jsx)(f.rr,{className:"text-xs sm:text-sm",children:r?"Update the details of this product.":"Fill in the details to add a new product to your inventory."})]}),(0,a.jsx)(C,{product:r,onSubmit:e=>{l(e)},onCancel:()=>s(!1),categories:n})]})})};var k=s(9572),P=s(37607),S=s(34301),R=s(24371),E=s(87481),q=s(80410),z=s(68856),D=s(55365),F=s(6874),I=s.n(F),B=s(51470),M=s(66681),L=s(66695),U=s(81448);let $=["owner","admin","employee"],H=["owner","admin","employee"];function J(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[i,d]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null),[m,u]=(0,r.useState)(!0),{toast:x}=(0,E.dj)(),{userProfile:h}=(0,M.A)(),[f,g]=(0,r.useState)(""),[j,y]=(0,r.useState)("all"),[v,b]=(0,r.useState)(""),[C,F]=(0,r.useState)(""),[J,O]=(0,r.useState)(!1),[G,V]=(0,r.useState)(10),[Z,T]=(0,r.useState)(null),[Y,_]=(0,r.useState)(null),[W,X]=(0,r.useState)([null]),[Q,K]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),es=(0,r.useCallback)(async()=>{try{let e=await (0,q.bW)();n(e.sort((e,t)=>e.name.localeCompare(t.name)))}catch(e){console.error("Error fetching categories:",e),x({title:"Error",description:"Failed to fetch categories.",variant:"destructive"})}},[x]),ea=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";K(!0),u("initial"===e||"reset"===e);let a=null,r=null;"next"===e?a=Y:"prev"===e?W.length>1&&(r=Z):"reset"===e&&(X([null]),T(null),_(null));try{let{products:l,firstDoc:n,lastDoc:i}=await (0,q.iB)(G+ +("prev"!==e),"name","asc",a,r),d=l.map(e=>{var t;return{...e,categoryName:(null==(t=s.find(t=>t.id===e.categoryId))?void 0:t.name)||"Unknown"}}),c=d,o=!1;"prev"!==e&&d.length>G?(c=d.slice(0,G),o=!0):o=!1,t(c),T(n),_(i),et(o),"next"===e&&n?X(e=>[...e,n]):"prev"===e&&X(e=>e.slice(0,-1))}catch(e){console.error("Error fetching products:",e),x({title:"Error",description:"Failed to fetch products.",variant:"destructive"})}u(!1),K(!1)},[G,s,x,Y,Z,W]);(0,r.useEffect)(()=>{es()},[es]),(0,r.useEffect)(()=>{s.length>0&&ea("initial")},[s,G]);let er=(0,r.useMemo)(()=>e.filter(e=>{var t,s;let a=!f||e.name.toLowerCase().includes(f.toLowerCase()),r=!j||"all"===j||e.categoryId===j,l=!v||(null==(t=e.serialNumber)?void 0:t.toLowerCase().includes(v.toLowerCase())),n=!C||(null==(s=e.barcode)?void 0:s.toLowerCase().includes(C.toLowerCase()));return a&&r&&l&&n}).sort((e,t)=>e.name.localeCompare(t.name)),[e,f,j,v,C]),el=async e=>{try{await (0,q.DD)(e),ea(W.length>1?"reset":"initial"),x({title:"Product Deleted",description:"The product has been successfully removed.",variant:"destructive"})}catch(e){console.error("Error deleting product:",e),x({title:"Error",description:"Failed to delete product.",variant:"destructive"})}},en=async e=>{var t;let a=(null==(t=s.find(t=>t.id===e.categoryId))?void 0:t.name)||"Unknown",r={...e,categoryName:a};try{c?await (0,q.vc)(c.id,r):await (0,q.Bj)({...r,imageUrl:"https://picsum.photos/seed/".concat(encodeURIComponent(e.name.split(" ")[0]),"/200/200"),imageHint:"".concat(e.name.split(" ")[0].toLowerCase()," item")}),ea(W.length>1?"reset":"initial"),x({title:c?"Product Updated":"Product Added",description:'"'.concat(e.name,'" has been successfully ').concat(c?"updated":"added",".")}),d(!1),o(null)}catch(e){console.error("Error saving product:",e),x({title:"Error",description:"Failed to save product.",variant:"destructive"})}};return(0,a.jsx)(B.default,{allowedRoles:$,children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-primary",children:"Product Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your electronic store's inventory here."})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[(0,a.jsxs)(l.$,{variant:"outline",onClick:()=>O(!J),className:"w-full sm:w-auto",children:[(0,a.jsx)(k.A,{className:"mr-2 h-5 w-5"})," ",J?"Hide":"Show"," Filters"]}),h&&H.includes(h.role)&&(0,a.jsx)(l.$,{asChild:!0,variant:"outline",className:"w-full sm:w-auto border-accent text-accent hover:bg-accent/10 hover:text-accent",children:(0,a.jsxs)(I(),{href:"/settings/bulk-upload",children:[(0,a.jsx)(P.A,{className:"mr-2 h-5 w-5"})," Bulk Upload"]})}),(0,a.jsxs)(l.$,{onClick:()=>{if(0===s.length)return void x({title:"No Categories Found",description:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{children:"Please add categories first before adding products."}),(0,a.jsx)(l.$,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsx)(I(),{href:"/categories",children:"Go to Categories"})})]}),variant:"destructive",duration:7e3});o(null),d(!0)},className:"bg-primary hover:bg-primary/90 w-full sm:w-auto",children:[(0,a.jsx)(S.A,{className:"mr-2 h-5 w-5"})," Add New Product"]})]})]}),J&&(0,a.jsxs)(L.Zp,{className:"shadow-md",children:[(0,a.jsx)(L.aR,{children:(0,a.jsxs)(L.ZB,{className:"text-lg flex justify-between items-center",children:["Filter Products (Client-Side)",(0,a.jsxs)(l.$,{variant:"ghost",size:"sm",onClick:()=>{g(""),y("all"),b(""),F(""),O(!1)},className:"text-xs",children:[(0,a.jsx)(R.A,{className:"mr-1 h-4 w-4"})," Reset Filters"]})]})}),(0,a.jsxs)(L.Wu,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(w.p,{placeholder:"Filter by Name...",value:f,onChange:e=>g(e.target.value),className:"text-sm"}),(0,a.jsxs)(N.l6,{value:j,onValueChange:y,children:[(0,a.jsx)(N.bq,{className:"text-sm",children:(0,a.jsx)(N.yv,{placeholder:"Filter by Category..."})}),(0,a.jsxs)(N.gC,{children:[(0,a.jsx)(N.eb,{value:"all",children:"All Categories"}),s.map(e=>(0,a.jsx)(N.eb,{value:e.id,className:"text-sm",children:e.name},e.id))]})]}),(0,a.jsx)(w.p,{placeholder:"Filter by Serial Number...",value:v,onChange:e=>b(e.target.value),className:"text-sm"}),(0,a.jsx)(w.p,{placeholder:"Filter by Barcode...",value:C,onChange:e=>F(e.target.value),className:"text-sm"})]})]}),m?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(z.E,{className:"h-12 w-full"}),(0,a.jsx)(z.E,{className:"h-20 w-full"}),(0,a.jsx)(z.E,{className:"h-20 w-full"}),(0,a.jsx)(z.E,{className:"h-20 w-full"})]}):(0,a.jsxs)(a.Fragment,{children:[0===s.length&&0===e.length&&(0,a.jsxs)(D.Fc,{variant:"default",className:"border-accent text-accent bg-accent/10",children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 !text-accent",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,a.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),(0,a.jsx)(D.XL,{className:"font-semibold",children:"No Categories Available"}),(0,a.jsxs)(D.TN,{children:["You currently have no product categories defined. Please",(0,a.jsx)(I(),{href:"/categories",className:"underline font-medium hover:text-accent/80 mx-1",children:"add categories"}),"before adding products to better organize your inventory."]})]}),(0,a.jsxs)(L.Zp,{className:"shadow-lg",children:[(0,a.jsxs)(L.aR,{children:[(0,a.jsx)(L.ZB,{className:"text-lg sm:text-xl text-primary",children:"Product List"}),(0,a.jsx)(L.BT,{className:"text-sm sm:text-base",children:"Overview of all products in your inventory."})]}),(0,a.jsxs)(L.Wu,{className:"p-0",children:[" ",(0,a.jsx)(p,{products:er,onEdit:e=>{0!==s.length||e.categoryId||x({title:"No Categories Available",description:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{children:"Please add categories first. You cannot edit this product's category until some are available."}),(0,a.jsx)(l.$,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsx)(I(),{href:"/categories",children:"Go to Categories"})})]}),variant:"destructive",duration:7e3}),o(e),d(!0)},onDelete:el})]}),(0,a.jsx)(U.A,{canGoPrev:W.length>1&&!Q,canGoNext:ee&&!Q,onPrevPage:()=>{W.length>1&&!Q&&ea("prev")},onNextPage:()=>{ee&&!Q&&ea("next")},itemsPerPage:G,onItemsPerPageChange:e=>{V(Number(e)),ea("reset")}})]})]}),(0,a.jsx)(A,{isOpen:i,onOpenChange:d,product:c,onSubmit:en,categories:s})]})})}},55281:(e,t,s)=>{Promise.resolve().then(s.bind(s,42923))},55365:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>d,TN:()=>o,XL:()=>c});var a=s(95155),r=s(12115),l=s(74466),n=s(59434);let i=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,...l}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(i({variant:r}),s),...l})});d.displayName="Alert";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})});c.displayName="AlertTitle";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",s),...r})});o.displayName="AlertDescription"},59409:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>f,gC:()=>p,l6:()=>o,yv:()=>m});var a=s(95155),r=s(12115),l=s(78935),n=s(79556),i=s(77381),d=s(10518),c=s(59434);let o=l.bL;l.YJ;let m=l.WT,u=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(l.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...i,children:[r,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=l.wn.displayName;let p=r.forwardRef((e,t)=>{let{className:s,children:r,position:n="popper",...i}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...i,children:[(0,a.jsx)(x,{}),(0,a.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(h,{})]})})});p.displayName=l.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=l.JU.displayName;let f=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(l.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:r})]})});f.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=l.wv.displayName},73158:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},80410:(e,t,s)=>{"use strict";s.d(t,{Ah:()=>u,Bj:()=>y,DD:()=>w,Gk:()=>A,K7:()=>h,WF:()=>S,bD:()=>P,bW:()=>m,d$:()=>f,hA:()=>R,iB:()=>g,lw:()=>p,od:()=>N,oo:()=>j,r$:()=>E,st:()=>x,uq:()=>q,vc:()=>v,w0:()=>k,xt:()=>b,yw:()=>C});var a=s(56104),r=s(35317),l=s(83013);let n=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",l=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,d=(0,r.P)((0,r.rJ)(a.db,e));t&&(d=(0,r.P)(d,(0,r.My)(t,s))),l&&l>0&&(d=n?(0,r.P)(d,(0,r.HM)(n),(0,r.AB)(l)):i?(0,r.P)(d,(0,r.rf)(i),(0,r.$1)(l)):(0,r.P)(d,(0,r.AB)(l)));let c=await (0,r.GG)(d);return{data:c.docs.map(e=>({id:e.id,...e.data()})),firstDoc:c.docs.length>0?c.docs[0]:null,lastDoc:c.docs.length>0?c.docs[c.docs.length-1]:null}},i=async(e,t)=>{let s=(0,r.H9)(a.db,e,t),l=await (0,r.x7)(s);return l.exists()?{id:l.id,...l.data()}:null},d=async(e,t)=>(await (0,r.gS)((0,r.rJ)(a.db,e),{...t,createdAt:(0,r.O5)(),updatedAt:(0,r.O5)()})).id,c=async(e,t,s)=>{let l=(0,r.H9)(a.db,e,t);await (0,r.mZ)(l,{...s,updatedAt:(0,r.O5)()})},o=async(e,t)=>{await (0,r.kd)((0,r.H9)(a.db,e,t))},m=async()=>{let{data:e}=await n("categories","name");return e},u=async e=>{let t=await d("categories",e),s=r.Dc.now();return{id:t,...e,createdAt:s,updatedAt:s}},x=(e,t)=>c("categories",e,t),h=e=>o("categories",e),p=async e=>{let t=e.trim(),s=(0,r.P)((0,r.rJ)(a.db,"categories"),(0,r._M)("name","==",t),(0,r.AB)(1)),l=await (0,r.GG)(s);if(l.empty)return u({name:t});{let e=l.docs[0];return{id:e.id,...e.data()}}},f=async()=>{let{data:e}=await n("products","name");return e},g=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,{data:l,firstDoc:i,lastDoc:d}=await n("products",t,s,e,a,r);return{products:l,firstDoc:i,lastDoc:d}},j=e=>i("products",e),y=e=>d("products",e),v=(e,t)=>c("products",e,t),w=e=>o("products",e),N=async()=>{let{data:e}=await n("customers","name");return e},b=e=>i("customers",e),C=e=>d("customers",e),A=(e,t)=>c("customers",e,t),k=e=>o("customers",e),P=async e=>{let t=(0,r.P)((0,r.rJ)(a.db,"customers"),(0,r._M)("mobileNumber","==",e));return(await (0,r.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))},S=async()=>{let{data:e}=await n("orders","orderDate","desc");return e},R=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"orderDate",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"desc",a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,{data:l,firstDoc:i,lastDoc:d}=await n("orders",t,s,e,a,r);return{orders:l,firstDoc:i,lastDoc:d}},E=e=>i("orders",e),q=async(e,t)=>{let s=(0,r.wP)(a.db),n=new Date,i="ORD-".concat((0,l.GP)(n,"yyyyMMdd-HHmmssSSS")),d={...e,orderNumber:i,orderDate:r.Dc.fromDate(n),createdAt:(0,r.O5)(),updatedAt:(0,r.O5)()},c=(0,r.H9)((0,r.rJ)(a.db,"orders"));for(let e of(s.set(c,d),t)){let t=(0,r.H9)(a.db,"products",e.productId),l=await (0,r.x7)(t);if(l.exists()){let a=l.data().quantity||0,n=Math.max(0,a-e.quantity);a<e.quantity&&console.warn("Stock for product ".concat(e.productId," (").concat(l.data().name,") is ").concat(a,", but trying to decrement by ").concat(e.quantity,". Setting to 0.")),s.update(t,{quantity:n,updatedAt:(0,r.O5)()})}else console.warn("Product with ID ".concat(e.productId," not found for stock decrement."))}return await s.commit(),c.id}},81448:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(95155),r=s(30285),l=s(59409),n=s(965),i=s(73158);let d=[10,20,30,50,100];function c(e){let{onPrevPage:t,onNextPage:s,canGoPrev:c,canGoNext:o,itemsPerPage:m,onItemsPerPageChange:u,currentPage:x,totalItems:h}=e;return(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 p-2 sm:p-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"Rows per page:"}),(0,a.jsxs)(l.l6,{value:String(m),onValueChange:u,children:[(0,a.jsx)(l.bq,{className:"w-[70px] h-8 text-xs sm:text-sm",children:(0,a.jsx)(l.yv,{placeholder:m})}),(0,a.jsx)(l.gC,{children:d.map(e=>(0,a.jsx)(l.eb,{value:String(e),className:"text-xs sm:text-sm",children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:t,disabled:!c,className:"h-8 w-8 p-0 sm:h-9 sm:w-auto sm:px-3",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline ml-1",children:"Previous"})]}),(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:s,disabled:!o,className:"h-8 w-8 p-0 sm:h-9 sm:w-auto sm:px-3",children:[(0,a.jsx)("span",{className:"hidden sm:inline mr-1",children:"Next"}),(0,a.jsx)(i.A,{className:"h-4 w-4"})]})]})]})}},87374:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(40157).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},90010:(e,t,s)=>{"use strict";s.d(t,{$v:()=>f,EO:()=>u,Lt:()=>d,Rx:()=>g,Zr:()=>j,ck:()=>h,r7:()=>p,tv:()=>c,wd:()=>x});var a=s(95155),r=s(12115),l=s(61378),n=s(59434),i=s(30285);let d=l.bL,c=l.l9,o=l.ZL,m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});m.displayName=l.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsx)(l.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});u.displayName=l.UC.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};x.displayName="AlertDialogHeader";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="AlertDialogFooter";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold",s),...r})});p.displayName=l.hE.displayName;let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});f.displayName=l.VY.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.rc,{ref:t,className:(0,n.cn)((0,i.r)(),s),...r})});g.displayName=l.rc.displayName;let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.ZD,{ref:t,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});j.displayName=l.ZD.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,9855,9701,3013,5209,6874,5589,7655,221,2882,3647,6766,6916,2475,8970,8469,8441,1684,7358],()=>t(55281)),_N_E=e.O()}]);