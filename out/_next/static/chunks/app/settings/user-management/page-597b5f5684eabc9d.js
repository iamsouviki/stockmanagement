(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9324],{12543:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(40157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},26126:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var a=t(95155);t(12115);var r=t(74466),l=t(59434);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(i({variant:t}),s),...r})}},47686:(e,s,t)=>{Promise.resolve().then(t.bind(t,66012))},50286:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(40157).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},54683:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(40157).A)("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]])},59409:(e,s,t)=>{"use strict";t.d(s,{bq:()=>u,eb:()=>f,gC:()=>h,l6:()=>c,yv:()=>m});var a=t(95155),r=t(12115),l=t(78935),i=t(79556),n=t(77381),o=t(10518),d=t(59434);let c=l.bL;l.YJ;let m=l.WT,u=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(l.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[r,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.PP,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=l.PP.displayName;let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.wn,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=l.wn.displayName;let h=r.forwardRef((e,s)=>{let{className:t,children:r,position:i="popper",...n}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:[(0,a.jsx)(p,{}),(0,a.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(x,{})]})})});h.displayName=l.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.JU,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=l.JU.displayName;let f=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(l.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:r})]})});f.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=l.wv.displayName},66012:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Z});var a=t(95155),r=t(12115),l=t(30285),i=t(85127),n=t(26126),o=t(40157);let d=(0,o.A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var c=t(54683);let m=(0,o.A)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var u=t(75943),p=t(77223),x=t(90010),h=t(66424),f=t(66695),y=t(83013),j=t(35317);let w=e=>{let{role:s}=e;switch(s){case"owner":return(0,a.jsx)(d,{className:"h-4 w-4 text-amber-500"});case"admin":return(0,a.jsx)(c.A,{className:"h-4 w-4 text-blue-500"});case"employee":return(0,a.jsx)(m,{className:"h-4 w-4 text-green-500"});default:return null}},v=e=>{let{users:s,onEdit:t,onDelete:r,currentUserProfile:o}=e,d=e=>{let s;if(!e)return"N/A";if(e instanceof j.Dc)s=e.toDate();else if(e instanceof Date)s=e;else if("string"==typeof e)s=new Date(e);else if("function"==typeof(null==e?void 0:e.toDate))s=e.toDate();else try{if(s=new Date(e),isNaN(s.getTime()))throw Error("Invalid date string from profile")}catch(s){return console.warn("Unformattable dateValue type in UserManagementTable:",typeof e,e,s),"Invalid Date"}try{if(isNaN(s.getTime()))return"Invalid Date";return(0,y.GP)(s,"PPp")}catch(e){return console.error("Error formatting final Date object in UserManagementTable:",e,s),"Error Date"}},c=e=>e.id!==o.id&&"owner"!==e.role&&("owner"===o.role||"admin"===o.role)&&("admin"===e.role||"employee"===e.role),m=e=>e.id!==o.id&&"owner"!==e.role&&("owner"===o.role?"admin"===e.role||"employee"===e.role:"admin"===o.role&&"employee"===e.role);return(0,a.jsxs)(f.Zp,{className:"shadow-lg",children:[(0,a.jsxs)(f.aR,{children:[(0,a.jsx)(f.ZB,{className:"text-lg sm:text-xl text-primary",children:"User Accounts"}),(0,a.jsx)(f.BT,{className:"text-sm sm:text-base",children:"List of all registered users and their roles."})]}),(0,a.jsx)(f.Wu,{children:(0,a.jsxs)(h.F,{className:"w-full whitespace-nowrap rounded-md border",children:[(0,a.jsxs)(i.XI,{className:"min-w-[700px] sm:min-w-full",children:[(0,a.jsx)(i.A0,{children:(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nd,{className:"px-2 sm:px-4",children:"Name"}),(0,a.jsx)(i.nd,{className:"px-2 sm:px-4",children:"Email"}),(0,a.jsx)(i.nd,{className:"px-2 sm:px-4",children:"Mobile"}),(0,a.jsx)(i.nd,{className:"px-2 sm:px-4",children:"Role"}),(0,a.jsx)(i.nd,{className:"px-2 sm:px-4",children:"Created At"}),(0,a.jsx)(i.nd,{className:"text-center w-[100px] sm:w-[120px] px-2 sm:px-4",children:"Actions"})]})}),(0,a.jsx)(i.BF,{children:0===s.length?(0,a.jsx)(i.Hj,{children:(0,a.jsx)(i.nA,{colSpan:6,className:"h-24 text-center text-sm sm:text-base",children:"No users found."})}):s.map(e=>(0,a.jsxs)(i.Hj,{children:[(0,a.jsx)(i.nA,{className:"font-medium text-xs sm:text-sm px-2 sm:px-4 whitespace-normal break-words",children:e.displayName||"N/A"}),(0,a.jsx)(i.nA,{className:"text-xs sm:text-sm px-2 sm:px-4 whitespace-normal break-words",children:e.email||"N/A"}),(0,a.jsx)(i.nA,{className:"text-xs sm:text-sm px-2 sm:px-4",children:e.mobileNumber||"-"}),(0,a.jsx)(i.nA,{className:"text-xs sm:text-sm px-2 sm:px-4",children:(0,a.jsxs)(n.E,{variant:"owner"===e.role?"default":"admin"===e.role?"destructive":"secondary",className:"capitalize flex items-center gap-1 w-fit text-xs ".concat("owner"===e.role?"bg-amber-500 hover:bg-amber-600":"admin"===e.role?"bg-blue-500 hover:bg-blue-600":"bg-green-500 hover:bg-green-600"," text-white"),children:[(0,a.jsx)(w,{role:e.role}),e.role]})}),(0,a.jsx)(i.nA,{className:"text-xs sm:text-sm px-2 sm:px-4",children:d(e.createdAt)}),(0,a.jsx)(i.nA,{className:"text-center px-2 sm:px-4",children:(0,a.jsxs)("div",{className:"flex justify-center space-x-1 sm:space-x-2",children:[c(e)&&(0,a.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-7 w-7 sm:h-8 sm:w-8",onClick:()=>t(e),title:"Edit User",children:(0,a.jsx)(u.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-blue-600"})}),m(e)&&(0,a.jsxs)(x.Lt,{children:[(0,a.jsx)(x.tv,{asChild:!0,children:(0,a.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-7 w-7 sm:h-8 sm:w-8",title:"Delete User",children:(0,a.jsx)(p.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-red-600"})})}),(0,a.jsxs)(x.EO,{children:[(0,a.jsxs)(x.wd,{children:[(0,a.jsx)(x.r7,{children:"Are you sure?"}),(0,a.jsxs)(x.$v,{children:['This action will delete the user profile for "',e.displayName||e.email,'". The Firebase Authentication account might need to be removed separately by an administrator. This action cannot be undone.']})]}),(0,a.jsxs)(x.ck,{children:[(0,a.jsx)(x.Zr,{children:"Cancel"}),(0,a.jsx)(x.Rx,{onClick:()=>r(e.id,e.role),className:"bg-destructive hover:bg-destructive/90",children:"Delete Profile"})]})]})]})]})})]},e.id))})]}),(0,a.jsx)(h.$,{orientation:"horizontal"})]})})]})};var N=t(54165),b=t(62177),g=t(90221),A=t(55594),k=t(17759),E=t(62523),C=t(59409),U=t(56104);let D=A.Ik({displayName:A.Yj().min(2,"Display name must be at least 2 characters.").max(50,"Name must be 50 characters or less."),mobileNumber:A.Yj().optional().or(A.eu("")).refine(e=>!e||/^[+]?[0-9\s-()]{10,}$/.test(e),{message:"Invalid mobile number format (min 10 digits)."}),role:A.Ie(e=>["owner","admin","employee"].includes(e),{message:"Invalid role selected."})}),R=D.extend({email:A.Yj().email("Invalid email address."),password:A.Yj().min(6,"Password must be at least 6 characters.")}),z=D.extend({email:A.Yj().email("Invalid email address.").optional(),password:A.Yj().optional()}),M=e=>{var s;let{userToEdit:t,onSubmit:i,onCancel:n,currentUserRole:o}=e,d=t?z:R,c=(null==t?void 0:t.id)===(null==(s=U.j2.currentUser)?void 0:s.uid),m=(0,b.mN)({resolver:(0,g.u)(d),defaultValues:t?{email:t.email||"",displayName:t.displayName||"",mobileNumber:t.mobileNumber||"",role:t.role,password:""}:{email:"",displayName:"",mobileNumber:"",role:"employee",password:""}});(0,r.useEffect)(()=>{t?m.reset({email:t.email||"",displayName:t.displayName||"",mobileNumber:t.mobileNumber||"",role:t.role,password:""}):m.reset({email:"",displayName:"",mobileNumber:"",role:"employee",password:""})},[t,m.reset]);let u=[];t?(u.push({value:t.role,label:t.role.charAt(0).toUpperCase()+t.role.slice(1)}),!c&&"owner"!==t.role&&("owner"===o?"admin"!==t.role||u.find(e=>"employee"===e.value)?"employee"!==t.role||u.find(e=>"admin"===e.value)||u.push({value:"admin",label:"Admin"}):u.push({value:"employee",label:"Employee"}):"admin"!==o||"admin"!==t.role||u.find(e=>"employee"===e.value)||u.push({value:"employee",label:"Employee"}))):"owner"===o?(u=[{value:"employee",label:"Employee"},{value:"admin",label:"Admin"}],"admin"!==m.getValues("role")&&"employee"!==m.getValues("role")&&m.setValue("role","employee")):"admin"===o&&(u=[{value:"employee",label:"Employee"}],m.setValue("role","employee")),u=Array.from(new Set(u.map(e=>e.value))).map(e=>u.find(s=>s.value===e)||{value:e,label:e.charAt(0).toUpperCase()+e.slice(1)}).sort((e,s)=>{let t={owner:0,admin:1,employee:2};return t[e.value]-t[s.value]});let p=()=>{if(c)return!0;if(t){if("owner"===t.role)return!0;if("owner"===o||"admin"===o)return u.length<=1}else if("owner"===o)return!1;return!0};return(0,a.jsx)(k.lV,{...m,children:(0,a.jsxs)("form",{onSubmit:m.handleSubmit(i),className:"space-y-4 sm:space-y-6 py-4",children:[(0,a.jsx)(k.zB,{control:m.control,name:"displayName",render:e=>{let{field:s}=e;return(0,a.jsxs)(k.eI,{children:[(0,a.jsx)(k.lR,{children:"Full Name"}),(0,a.jsx)(k.MJ,{children:(0,a.jsx)(E.p,{placeholder:"e.g., Jane Doe",...s})}),(0,a.jsx)(k.C5,{})]})}}),(0,a.jsx)(k.zB,{control:m.control,name:"email",render:e=>{let{field:s}=e;return(0,a.jsxs)(k.eI,{children:[(0,a.jsx)(k.lR,{children:"Email Address"}),(0,a.jsx)(k.MJ,{children:(0,a.jsx)(E.p,{type:"email",placeholder:"user@example.com",...s,disabled:!!t})}),!!t&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed for existing users."}),(0,a.jsx)(k.C5,{})]})}}),!t&&(0,a.jsx)(k.zB,{control:m.control,name:"password",render:e=>{let{field:s}=e;return(0,a.jsxs)(k.eI,{children:[(0,a.jsx)(k.lR,{children:"Password"}),(0,a.jsx)(k.MJ,{children:(0,a.jsx)(E.p,{type:"password",placeholder:"Min. 6 characters",...s})}),(0,a.jsx)(k.C5,{})]})}}),(0,a.jsx)(k.zB,{control:m.control,name:"mobileNumber",render:e=>{let{field:s}=e;return(0,a.jsxs)(k.eI,{children:[(0,a.jsx)(k.lR,{children:"Mobile Number (Optional)"}),(0,a.jsx)(k.MJ,{children:(0,a.jsx)(E.p,{placeholder:"e.g., 9876543210",...s})}),(0,a.jsx)(k.C5,{})]})}}),(0,a.jsx)(k.zB,{control:m.control,name:"role",render:e=>{let{field:s}=e;return(0,a.jsxs)(k.eI,{children:[(0,a.jsx)(k.lR,{children:"Role"}),(0,a.jsxs)(C.l6,{onValueChange:s.onChange,value:s.value,disabled:p(),children:[(0,a.jsx)(k.MJ,{children:(0,a.jsx)(C.bq,{children:(0,a.jsx)(C.yv,{placeholder:"Select a role"})})}),(0,a.jsx)(C.gC,{children:u.map(e=>(0,a.jsx)(C.eb,{value:e.value,children:e.label},e.value))})]}),p()&&t&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"This user's role cannot be changed here."}),c&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"You cannot change your own role."}),(0,a.jsx)(k.C5,{})]})}}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:space-x-3 pt-2 sm:pt-4",children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",onClick:n,className:"w-full sm:w-auto",children:"Cancel"}),(0,a.jsx)(l.$,{type:"submit",className:"w-full sm:w-auto bg-primary hover:bg-primary/90",children:t?"Update User":"owner"===o?"Add User (Admin/Employee)":"Add Employee"})]})]})})},P=e=>{let{isOpen:s,onOpenChange:t,user:r,onSubmit:l,currentUserRole:i}=e;return(0,a.jsx)(N.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(N.Cf,{className:"w-full max-w-md sm:max-w-lg md:max-w-[480px]",children:[(0,a.jsxs)(N.c7,{children:[(0,a.jsx)(N.L3,{className:"text-xl sm:text-2xl font-semibold text-primary",children:r?"Edit User":"Add New User"}),(0,a.jsx)(N.rr,{className:"text-xs sm:text-sm",children:r?"Update the details for this user account.":"Fill in the details to create a new user account."})]}),(0,a.jsx)(M,{userToEdit:r,onSubmit:e=>{l(e)},onCancel:()=>t(!1),currentUserRole:i})]})})};var I=t(12543),T=t(50286),V=t(34301),Y=t(87481),F=t(84744),J=t(93004),S=t(68856),O=t(51470),B=t(66681),L=t(6874),$=t.n(L);let q=["owner","admin"];function Z(){let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)(!1),[n,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),{toast:m}=(0,Y.dj)(),{userProfile:u}=(0,B.A)(),p=async()=>{c(!0);try{let e=await (0,F.jQ)();s(e)}catch(e){console.error("Error fetching users:",e),m({title:"Error",description:"Failed to fetch users.",variant:"destructive"})}c(!1)};(0,r.useEffect)(()=>{p()},[m]);let x=async(t,a)=>{if((null==u?void 0:u.id)===t)return void m({title:"Action Not Allowed",description:"You cannot delete your own account.",variant:"destructive"});if("owner"===a)return void m({title:"Action Not Allowed",description:"Deleting owner accounts is a restricted operation.",variant:"destructive"});if((null==u?void 0:u.role)==="admin"&&"admin"===a)return void m({title:"Permission Denied",description:"Admins cannot delete other admin accounts.",variant:"destructive"});if((null==u?void 0:u.role)==="owner"||(null==u?void 0:u.role)==="admin"&&"employee"===a)try{await (0,F.s0)(t),s(e.filter(e=>e.id!==t)),m({title:"User Profile Deleted",description:"The user's profile has been removed.",variant:"destructive"})}catch(e){console.error("Error deleting user:",e),m({title:"Error",description:"Failed to delete user profile. The Auth account might still exist.",variant:"destructive"})}else m({title:"Permission Denied",description:"You do not have permission to delete this user.",variant:"destructive"})},h=async e=>{try{if(n){if((null==u?void 0:u.role)==="admin")if("admin"===n.role&&"admin"===e.role);else if("admin"===n.role&&"employee"===e.role);else if("employee"===n.role&&"employee"===e.role);else if("employee"===n.role&&"admin"===e.role)return void m({title:"Permission Denied",description:"Admins cannot promote Employees to Admin.",variant:"destructive"});else return void m({title:"Permission Denied",description:"Admins can only demote other Admins to Employee, or manage Employee accounts. Cannot assign 'owner' role.",variant:"destructive"});if((null==u?void 0:u.role)==="owner"){if(("admin"===n.role||"employee"===n.role)&&("admin"===e.role||"employee"===e.role));else if("owner"===e.role)return void m({title:"Action Not Allowed",description:"Cannot assign Owner role via edit. This is a restricted operation.",variant:"destructive"})}await (0,F.eg)(n.id,{displayName:e.displayName,role:e.role,mobileNumber:e.mobileNumber}),await p(),m({title:"User Updated",description:'User "'.concat(e.displayName,'" has been successfully updated.')})}else{if(!e.email||!e.password)return void m({title:"Missing Fields",description:"Email and password are required for new users.",variant:"destructive"});if((null==u?void 0:u.role)==="owner"){if("owner"===e.role)return void m({title:"Action Not Allowed",description:"Cannot create new Owner directly. Assign Admin or Employee role.",variant:"destructive"})}else if((null==u?void 0:u.role)==="admin"&&("owner"===e.role||"admin"===e.role))return void m({title:"Permission Denied",description:"Admins can only create Employee accounts.",variant:"destructive"});let s=(await (0,J.eJ)(U.j2,e.email,e.password)).user;await (0,F.en)(s.uid,e.email,e.displayName,e.role,e.mobileNumber),await p(),m({title:"User Added",description:'User "'.concat(e.displayName,'" has been successfully added.')})}i(!1),o(null)}catch(s){console.error("Error saving user:",s);let e="Failed to save user.";"auth/email-already-in-use"===s.code?e="This email address is already in use by another account.":"auth/weak-password"===s.code&&(e="The password is too weak. It must be at least 6 characters long."),m({title:"Error",description:e,variant:"destructive"})}};return!u||d?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(S.E,{className:"h-8 w-32"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(S.E,{className:"h-12 w-1/2"}),(0,a.jsx)(S.E,{className:"h-10 w-36"})]}),(0,a.jsx)(S.E,{className:"h-12 w-full"}),(0,a.jsx)(S.E,{className:"h-64 w-full"})]}):(0,a.jsx)(O.default,{allowedRoles:q,children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(l.$,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsxs)($(),{href:"/",children:[(0,a.jsx)(I.A,{className:"mr-2 h-4 w-4"})," Back to Dashboard"]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold tracking-tight text-primary flex items-center",children:[(0,a.jsx)(T.A,{className:"mr-3 h-8 w-8"})," User Management"]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage application users, their roles, and permissions."})]}),("owner"===u.role||"admin"===u.role)&&(0,a.jsxs)(l.$,{onClick:()=>{o(null),i(!0)},className:"bg-primary hover:bg-primary/90 w-full sm:w-auto",children:[(0,a.jsx)(V.A,{className:"mr-2 h-5 w-5"}),"owner"===u.role?"Add User (Admin/Employee)":"Add New Employee"]})]}),(0,a.jsx)(v,{users:e,onEdit:e=>e.id===(null==u?void 0:u.id)?void m({title:"Action Not Allowed",description:"You cannot edit your own account details here.",variant:"default"}):"owner"===e.role?void m({title:"Action Not Allowed",description:"Owner accounts cannot be modified from this panel.",variant:"default"}):void(o(e),i(!0)),onDelete:x,currentUserProfile:u}),(0,a.jsx)(P,{isOpen:t,onOpenChange:i,user:n,onSubmit:h,currentUserRole:u.role})]})})}},90010:(e,s,t)=>{"use strict";t.d(s,{$v:()=>f,EO:()=>u,Lt:()=>o,Rx:()=>y,Zr:()=>j,ck:()=>x,r7:()=>h,tv:()=>d,wd:()=>p});var a=t(95155),r=t(12115),l=t(61378),i=t(59434),n=t(30285);let o=l.bL,d=l.l9,c=l.ZL,m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s})});m.displayName=l.hJ.displayName;let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(m,{}),(0,a.jsx)(l.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]})});u.displayName=l.UC.displayName;let p=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};p.displayName="AlertDialogHeader";let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};x.displayName="AlertDialogFooter";let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold",t),...r})});h.displayName=l.hE.displayName;let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});f.displayName=l.VY.displayName;let y=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.rc,{ref:s,className:(0,i.cn)((0,n.r)(),t),...r})});y.displayName=l.rc.displayName;let j=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.ZD,{ref:s,className:(0,i.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...r})});j.displayName=l.ZD.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,9855,9701,3013,5209,6874,5589,7655,221,2882,3647,6916,2475,8970,8469,8441,1684,7358],()=>s(47686)),_N_E=e.O()}]);