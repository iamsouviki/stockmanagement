"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6340],{15599:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(40157).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},18763:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(40157).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},51470:(e,t,a)=>{a.d(t,{default:()=>c});var r=a(95155),d=a(66681),s=a(35695),l=a(12115),o=a(68856);let n=()=>(0,r.jsxs)("div",{className:"space-y-6 p-4",children:[(0,r.jsx)(o.E,{className:"h-10 w-1/3"}),(0,r.jsx)(o.E,{className:"h-8 w-1/2"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(o.E,{className:"h-40 w-full"}),(0,r.jsx)(o.E,{className:"h-40 w-full"})]}),(0,r.jsx)(o.E,{className:"h-60 w-full"})]});function c(e){let{children:t,allowedRoles:a,redirectPath:o="/login"}=e,{currentUser:c,userProfile:i,isLoading:u}=(0,d.A)(),m=(0,s.useRouter)(),f=(0,s.usePathname)(),[h,p]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{let e=!1;u||(c?a&&a.length>0?i&&a.includes(i.role)?e=!0:"/"!==f&&m.replace("/"):e=!0:f!==o?m.replace(o):e=!0),h!==e&&p(e)},[c,i,u,m,a,o,f]),u)?(0,r.jsx)(n,{}):h?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsx)(n,{})}},66424:(e,t,a)=>{a.d(t,{$:()=>n,F:()=>o});var r=a(95155),d=a(12115),s=a(47655),l=a(59434);let o=d.forwardRef((e,t)=>{let{className:a,children:d,...o}=e;return(0,r.jsxs)(s.bL,{ref:t,className:(0,l.cn)("relative overflow-hidden",a),...o,children:[(0,r.jsx)(s.LM,{className:"h-full w-full rounded-[inherit]",children:d}),(0,r.jsx)(n,{}),(0,r.jsx)(s.OK,{})]})});o.displayName=s.bL.displayName;let n=d.forwardRef((e,t)=>{let{className:a,orientation:d="vertical",...o}=e;return(0,r.jsx)(s.VM,{ref:t,orientation:d,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===d&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===d&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...o,children:(0,r.jsx)(s.lr,{className:"relative flex-1 rounded-full bg-border"})})});n.displayName=s.VM.displayName},80410:(e,t,a)=>{a.d(t,{Ah:()=>m,Bj:()=>x,DD:()=>N,Gk:()=>k,K7:()=>h,WF:()=>R,bD:()=>M,bW:()=>u,d$:()=>y,hA:()=>H,iB:()=>b,lw:()=>p,od:()=>v,oo:()=>w,r$:()=>P,st:()=>f,uq:()=>E,vc:()=>g,w0:()=>D,xt:()=>j,yw:()=>A});var r=a(56104),d=a(35317),s=a(83013);let l=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",s=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,n=(0,d.P)((0,d.rJ)(r.db,e));t&&(n=(0,d.P)(n,(0,d.My)(t,a))),s&&s>0&&(n=l?(0,d.P)(n,(0,d.HM)(l),(0,d.AB)(s)):o?(0,d.P)(n,(0,d.rf)(o),(0,d.$1)(s)):(0,d.P)(n,(0,d.AB)(s)));let c=await (0,d.GG)(n);return{data:c.docs.map(e=>({id:e.id,...e.data()})),firstDoc:c.docs.length>0?c.docs[0]:null,lastDoc:c.docs.length>0?c.docs[c.docs.length-1]:null}},o=async(e,t)=>{let a=(0,d.H9)(r.db,e,t),s=await (0,d.x7)(a);return s.exists()?{id:s.id,...s.data()}:null},n=async(e,t)=>(await (0,d.gS)((0,d.rJ)(r.db,e),{...t,createdAt:(0,d.O5)(),updatedAt:(0,d.O5)()})).id,c=async(e,t,a)=>{let s=(0,d.H9)(r.db,e,t);await (0,d.mZ)(s,{...a,updatedAt:(0,d.O5)()})},i=async(e,t)=>{await (0,d.kd)((0,d.H9)(r.db,e,t))},u=async()=>{let{data:e}=await l("categories","name");return e},m=async e=>{let t=await n("categories",e),a=d.Dc.now();return{id:t,...e,createdAt:a,updatedAt:a}},f=(e,t)=>c("categories",e,t),h=e=>i("categories",e),p=async e=>{let t=e.trim(),a=(0,d.P)((0,d.rJ)(r.db,"categories"),(0,d._M)("name","==",t),(0,d.AB)(1)),s=await (0,d.GG)(a);if(s.empty)return m({name:t});{let e=s.docs[0];return{id:e.id,...e.data()}}},y=async()=>{let{data:e}=await l("products","name");return e},b=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc",r=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0,{data:s,firstDoc:o,lastDoc:n}=await l("products",t,a,e,r,d);return{products:s,firstDoc:o,lastDoc:n}},w=e=>o("products",e),x=e=>n("products",e),g=(e,t)=>c("products",e,t),N=e=>i("products",e),v=async()=>{let{data:e}=await l("customers","name");return e},j=e=>o("customers",e),A=e=>n("customers",e),k=(e,t)=>c("customers",e,t),D=e=>i("customers",e),M=async e=>{let t=(0,d.P)((0,d.rJ)(r.db,"customers"),(0,d._M)("mobileNumber","==",e));return(await (0,d.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))},R=async()=>{let{data:e}=await l("orders","orderDate","desc");return e},H=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"orderDate",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"desc",r=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0,{data:s,firstDoc:o,lastDoc:n}=await l("orders",t,a,e,r,d);return{orders:s,firstDoc:o,lastDoc:n}},P=e=>o("orders",e),E=async(e,t)=>{let a=(0,d.wP)(r.db),l=new Date,o="ORD-".concat((0,s.GP)(l,"yyyyMMdd-HHmmssSSS")),n={...e,orderNumber:o,orderDate:d.Dc.fromDate(l),createdAt:(0,d.O5)(),updatedAt:(0,d.O5)()},c=(0,d.H9)((0,d.rJ)(r.db,"orders"));for(let e of(a.set(c,n),t)){let t=(0,d.H9)(r.db,"products",e.productId),s=await (0,d.x7)(t);if(s.exists()){let r=s.data().quantity||0,l=Math.max(0,r-e.quantity);r<e.quantity&&console.warn("Stock for product ".concat(e.productId," (").concat(s.data().name,") is ").concat(r,", but trying to decrement by ").concat(e.quantity,". Setting to 0.")),a.update(t,{quantity:l,updatedAt:(0,d.O5)()})}else console.warn("Product with ID ".concat(e.productId," not found for stock decrement."))}return await a.commit(),c.id}},85127:(e,t,a)=>{a.d(t,{A0:()=>o,BF:()=>n,Hj:()=>c,XI:()=>l,nA:()=>u,nd:()=>i});var r=a(95155),d=a(12115),s=a(59434);let l=d.forwardRef((e,t)=>{let{className:a,...d}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",a),...d})})});l.displayName="Table";let o=d.forwardRef((e,t)=>{let{className:a,...d}=e;return(0,r.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",a),...d})});o.displayName="TableHeader";let n=d.forwardRef((e,t)=>{let{className:a,...d}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",a),...d})});n.displayName="TableBody",d.forwardRef((e,t)=>{let{className:a,...d}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...d})}).displayName="TableFooter";let c=d.forwardRef((e,t)=>{let{className:a,...d}=e;return(0,r.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...d})});c.displayName="TableRow";let i=d.forwardRef((e,t)=>{let{className:a,...d}=e;return(0,r.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...d})});i.displayName="TableHead";let u=d.forwardRef((e,t)=>{let{className:a,...d}=e;return(0,r.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...d})});u.displayName="TableCell",d.forwardRef((e,t)=>{let{className:a,...d}=e;return(0,r.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",a),...d})}).displayName="TableCaption"}}]);